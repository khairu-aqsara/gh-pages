<!DOCTYPE html><html lang="en" class="text-zinc-800"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/favicon.png"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=PT+Mono&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://coretan.khairu-aqsara.cloud/posts/moodle-contribonly-plugin-backup"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script><!-- Primary Meta Tags --><title>Backup and Restore Additional Moodle Plugin · KHAIRU</title><meta name="title" content="Backup and Restore Additional Moodle Plugin · KHAIRU"><meta name="description" content="If moodle is installed using git, you don't have to use this plugin"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://coretan.khairu-aqsara.cloud/posts/moodle-contribonly-plugin-backup"><meta property="og:title" content="Backup and Restore Additional Moodle Plugin · KHAIRU"><meta property="og:description" content="If moodle is installed using git, you don't have to use this plugin"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://coretan.khairu-aqsara.cloud/posts/moodle-contribonly-plugin-backup"><meta property="twitter:title" content="Backup and Restore Additional Moodle Plugin · KHAIRU"><meta property="twitter:description" content="If moodle is installed using git, you don't have to use this plugin"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/_slug_.BD4GzjIT.css">
<link rel="stylesheet" href="/_astro/_slug_.BQZdeNRP.css"><script type="module" src="/_astro/hoisted.UvcfpOZg.js"></script>
<script type="module" src="/_astro/page.Q-kNTEwv.js"></script></head> <body> <div class="flex flex-col h-full mb-8 overflow-y-scroll antialiased"> <header class="sticky z-50 top-0 bg-white/80 backdrop-blur-xl transition-all select-none bg-gradient-to-b from-orange-50"> <div class="flex flex-row gap-8 items-center justify-between max-w-screen-md mx-auto h-24 px-4 sm:px-6"> <a href="/" class="flex flex-row items-center justify-center gap-2"> <img src="/avatar.jpg" alt="author avatar" class="w-10 rounded-full aspect-square"> <span class="font-title font-black">KHAIRU</span> </a> <div class="flex flex-row gap-4"> <a href="/posts" target="_self" class="h-full text-sm hover:text-orange-700"> Post </a><a href="/tags" target="_self" class="h-full text-sm hover:text-orange-700"> Tags </a><a href="/date" target="_self" class="h-full text-sm hover:text-orange-700"> Archive </a><a href="https://github.com/khairu-aqsara" target="_blank" class="h-full text-sm hover:text-orange-700"> GitHub </a> </div> </div> </header> <div class="flex-auto">  <div class="flex flex-col gap-8 md:w-5/6 px-4 py-12 sm:px-8 mx-auto"> <div class="flex flex-col gap-6 items-center justify-center max-w-screen-sm mx-auto"> <h1 id="header" class="text-5xl text-center font-title font-black">Backup and Restore Additional Moodle Plugin</h1> <div class="flex items-center justify-center gap-2"> <a href="/date/2024" target="_self" class="px-2.5 py-1 rounded-lg text-xs bg-zinc-50"> August 2, 2024 </a> <a href="/tags/git" target="_self" class="px-2.5 py-1 rounded-lg text-xs text-red-600 font-medium bg-red-50/80 capitalize"> git </a><a href="/tags/workflow" target="_self" class="px-2.5 py-1 rounded-lg text-xs text-red-600 font-medium bg-red-50/80 capitalize"> workflow </a> </div> <p class="text-lg text-center text-zinc-700 max-w-[480px]">If moodle is installed using git, you don&#39;t have to use this plugin</p> </div> <img src="https://github.com/khairu-aqsara/moodle_contribonly_plugin_backup/raw/main/moodle_plugin_backup.png?w=1200&q=80" alt="cover" class="w-full max-w-screen-md mx-auto rounded-lg"> </div> <div class="relative flex flex-col gap-2 max-w-screen-md mx-auto px-4 sm:px-6 text-base text-zinc-700"> <p> Upgrading a Moodle site has never been an easy task. According to Moodle’s standard upgrading guide, we cannot simply overwrite old files with new ones. This means we need to relocate all installed additional plugins to the directory of the new Moodle version. To facilitate this process, <span data-notion-identity="notion" data-notion-type="highlight" data-notion-color="green" data-notion-strokewidth="1.5"> we can use a plugin designed specifically for backing up and restoring additional (contributed) plugins installed on Moodle </span>, which eliminates the need for manual relocation during the upgrade process. Once we have moved the additional plugins to their original folder, we can allow Moodle to handle the upgrades for those plugins as needed. </p>
<h1 id="how-to-use" class="text-4xl font-bold my-2"> How to use </h1>
<h3 id="backup" class="text-xl font-bold my-2"> Backup </h3>
<p> <span data-notion-identity="notion" data-notion-type="underline" data-notion-color="red" data-notion-strokewidth="1.5"> Ensure you are in the root directory of the installed Moodle </span>. This process will copy the additional plugin to the specified folder, along with their metadata in JSON format for restoration purposes. </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">wget</span><span style="color:#032F62"> https://raw.githubusercontent.com/khairu-aqsara/moodle_contribonly_plugin_backup/main/plugin_backups.php</span></span>
<span class="line"><span style="color:#6F42C1">chmod</span><span style="color:#032F62"> +x</span><span style="color:#032F62"> plugin_backups.php</span></span>
<span class="line"><span style="color:#6F42C1">sudo</span><span style="color:#005CC5"> -u</span><span style="color:#032F62"> www-data</span><span style="color:#032F62"> php</span><span style="color:#032F62"> plugin_backups.php</span><span style="color:#005CC5"> --destination=/var/www/html</span><span style="color:#005CC5"> --folder=plugin_backup</span><span style="color:#005CC5"> --mode=backup</span></span>
<span class="line"></span></code></pre>
<h3 id="restore" class="text-xl font-bold my-2"> Restore </h3>
<p> <span data-notion-identity="notion" data-notion-type="underline" data-notion-color="red" data-notion-strokewidth="1.5"> Ensure that you are in the root directory of the newly installed version of Moodle </span> before beginning the upgrade process. This process will transfer the additional plugins from the specified folder to the new Moodle installation directory, based on the plugin metadata root directory. </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6F42C1">wget</span><span style="color:#032F62"> https://raw.githubusercontent.com/khairu-aqsara/moodle_contribonly_plugin_backup/main/plugin_backups.php</span></span>
<span class="line"><span style="color:#6F42C1">chmod</span><span style="color:#032F62"> +x</span><span style="color:#032F62"> plugin_backups.php</span></span>
<span class="line"><span style="color:#6F42C1">sudo</span><span style="color:#005CC5"> -u</span><span style="color:#032F62"> www-data</span><span style="color:#032F62"> php</span><span style="color:#032F62"> plugin_backups.php</span><span style="color:#005CC5"> --destination=/var/www/html</span><span style="color:#005CC5"> --folder=plugin_backup</span><span style="color:#005CC5"> --mode=restore</span></span>
<span class="line"></span></code></pre>
<p> That command will generate a new JSON file similar to the one shown below. </p>
<pre class="astro-code github-light" style="background-color:#fff;color:#24292e;overflow-x:auto" tabindex="0" data-language="json"><code><span class="line"><span style="color:#24292E">{</span></span>
<span class="line"><span style="color:#005CC5">  &quot;type&quot;</span><span style="color:#24292E">:</span><span style="color:#032F62">&quot;assignfeedback&quot;</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">  &quot;name&quot;</span><span style="color:#24292E">:</span><span style="color:#032F62">&quot;structured&quot;</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">  &quot;typerootdir&quot;</span><span style="color:#24292E">:</span><span style="color:#032F62">&quot;/var/www/html/moodle/mod/assign/feedback&quot;</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">  &quot;rootdir&quot;</span><span style="color:#24292E">:</span><span style="color:#032F62">&quot;/var/www/html/moodle/mod/assign/feedback/structured&quot;</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">  &quot;displayname&quot;</span><span style="color:#24292E">:</span><span style="color:#032F62">&quot;Structured feedback&quot;</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">  &quot;versiondisk&quot;</span><span style="color:#24292E">:</span><span style="color:#005CC5">2019061100</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre> </div>  </div> <footer class="bg-gradient-to-t from-orange-50"> <div class="flex flex-row items-center justify-center max-w-screen-md h-96 mx-auto px-4 sm:px-6"> <p class="text-4xl leading-[60px] bg-clip-text text-center text-transparent bg-gradient-to-r from-orange-600 to-amber-600 font-title font-black">  </p> </div> </footer> </div> </body></html> 